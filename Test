from vex import *

# ---------------------------------------------------------
# VEX V5 Python Project
# Driver Control (TeleOp) for Pushback
# ---------------------------------------------------------

# Setup Brain and Controller
brain = Brain()
controller = Controller()

# Motors (adjust ports to match your bot!)
left_motor = Motor(Ports.PORT1, GearSetting.RATIO_18_1, False)
right_motor = Motor(Ports.PORT10, GearSetting.RATIO_18_1, True)
push_motor = Motor(Ports.PORT5, GearSetting.RATIO_18_1, False)

# Drivetrain setup (adjust measurements for your bot)
drivetrain = DriveTrain(left_motor, right_motor, 319.19, 295, 40, MM, 1)

# ---------------------------------------------------------
# TeleOp control loop
# ---------------------------------------------------------

def driver_control():
    brain.screen.print("Driver Control Started")

    while True:
        # Arcade Drive (left stick Y = forward/back, right stick X = turn)
        forward = controller.axis3.position()   # Left stick vertical
        turn = controller.axis1.position()      # Right stick horizontal

        left_speed = forward + turn
        right_speed = forward - turn

        left_motor.spin(FORWARD, left_speed, PERCENT)
        right_motor.spin(FORWARD, right_speed, PERCENT)

        # Push motor control
        if controller.buttonR1.pressing():
            push_motor.spin(FORWARD, 100, PERCENT)   # Push out
        elif controller.buttonR2.pressing():
            push_motor.spin(REVERSE, 100, PERCENT)   # Pull back
        else:
            push_motor.stop(HOLD)

        wait(20, MSEC)  # Prevents wasting CPU cycles

# ---------------------------------------------------------
# Main program
# ---------------------------------------------------------

def main():
    driver_control()   # Run TeleOp loop

main()
